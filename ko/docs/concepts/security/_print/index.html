<!doctype html><html lang=ko class=no-js>
<head>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JPP6RFM2BP"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-JPP6RFM2BP')</script>
<link rel=alternate hreflang=en href=https://kubernetes.io/docs/concepts/security/>
<link rel=alternate hreflang=zh href=https://kubernetes.io/zh/docs/concepts/security/>
<link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/concepts/security/>
<link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/concepts/security/>
<link rel=alternate hreflang=pt-br href=https://kubernetes.io/pt-br/docs/concepts/security/>
<link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/concepts/security/>
<link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/concepts/security/>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.87.0">
<link rel=canonical type=text/html href=https://kubernetes.io/ko/docs/concepts/security/>
<link rel="shortcut icon" type=image/png href=/images/favicon.png>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=manifest href=/manifest.webmanifest>
<link rel=apple-touch-icon href=/images/kubernetes-192x192.png>
<title>보안 | Kubernetes</title><meta property="og:title" content="보안">
<meta property="og:description" content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
">
<meta property="og:type" content="website">
<meta property="og:url" content="https://kubernetes.io/ko/docs/concepts/security/"><meta property="og:site_name" content="Kubernetes">
<meta itemprop=name content="보안">
<meta itemprop=description content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
"><meta name=twitter:card content="summary">
<meta name=twitter:title content="보안">
<meta name=twitter:description content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
">
<link href=/scss/main.css rel=stylesheet>
<script src=/js/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png"}</script>
<meta name=theme-color content="#326ce5">
<link rel=stylesheet href=/css/feature-states.css>
<meta name=description content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
">
<meta property="og:description" content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
">
<meta name=twitter:description content="클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념
">
<meta property="og:url" content="https://kubernetes.io/ko/docs/concepts/security/">
<meta property="og:title" content="보안">
<meta name=twitter:title content="보안">
<meta name=twitter:image content="https://kubernetes.io/images/favicon.png">
<meta name=twitter:image:alt content="Kubernetes">
<meta property="og:image" content="/images/kubernetes-horizontal-color.png">
<meta property="og:type" content="article">
<script src=/js/script.js></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary>
<a class=navbar-brand href=/ko/></a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-2 mb-lg-0">
<a class="nav-link active" href=/ko/docs/>문서</a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/ko/blog/>쿠버네티스 블로그</a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/ko/training/>교육</a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/ko/partners/>파트너</a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/ko/community/>커뮤니티</a>
</li>
<li class="nav-item mr-2 mb-lg-0">
<a class=nav-link href=/ko/case-studies/>사례 연구</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
버전
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/releases>Release Information</a>
<a class=dropdown-item href=https://kubernetes.io/ko/docs/concepts/security/>v1.27</a>
<a class=dropdown-item href=https://v1-26.docs.kubernetes.io/ko/docs/concepts/security/>v1.26</a>
<a class=dropdown-item href=https://v1-25.docs.kubernetes.io/ko/docs/concepts/security/>v1.25</a>
<a class=dropdown-item href=https://v1-24.docs.kubernetes.io/ko/docs/concepts/security/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/ko/docs/concepts/security/>v1.23</a>
</div>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
한국어 Korean
</a>
<div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/docs/concepts/security/>English</a>
<a class=dropdown-item href=/zh/docs/concepts/security/>中文 Chinese</a>
<a class=dropdown-item href=/ja/docs/concepts/security/>日本語 Japanese</a>
<a class=dropdown-item href=/fr/docs/concepts/security/>Français</a>
<a class=dropdown-item href=/pt-br/docs/concepts/security/>Português</a>
<a class=dropdown-item href=/es/docs/concepts/security/>Español</a>
<a class=dropdown-item href=/id/docs/concepts/security/>Bahasa Indonesia</a>
</div>
</li>
</ul>
</div>
<button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
이 섹션의 다중 페이지 출력 화면임.
<a href=# onclick="return print(),!1">여기를 클릭하여 프린트</a>.
</p><p>
<a href=/ko/docs/concepts/security/>이 페이지의 일반 화면으로 돌아가기</a>.
</p>
</div>
<h1 class=title>보안</h1>
<div class=lead>클라우드 네이티브 워크로드를 안전하게 유지하기 위한 개념</div>
<ul>
<li>1: <a href=#pg-04eeb110d75afc8acb2cf7a3db743985>클라우드 네이티브 보안 개요</a></li>
<li>2: <a href=#pg-4d77d1ae4c06aa14f54b385191627881>쿠버네티스 API 접근 제어하기</a></li>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-04eeb110d75afc8acb2cf7a3db743985>1 - 클라우드 네이티브 보안 개요</h1>
<div class=lead>클라우드 네이티브 보안 관점에서 쿠버네티스 보안을 생각해보기 위한 모델</div>
<p>이 개요는 클라우드 네이티브 보안의 맥락에서 쿠버네티스 보안에 대한 생각의 모델을 정의한다.</p>
<div class="alert alert-danger warning callout" role=alert>
<strong>경고:</strong> 이 컨테이너 보안 모델은 입증된 정보 보안 정책이 아닌 제안 사항을 제공한다.
</div>
<h2 id=클라우드-네이티브-보안의-4c>클라우드 네이티브 보안의 4C</h2>
<p>보안은 계층으로 생각할 수 있다. 클라우드 네이티브 보안의 4C는 클라우드(Cloud),
클러스터(Cluster), 컨테이너(Container)와 코드(Code)이다.</p>
<div class="alert alert-info note callout" role=alert>
<strong>참고:</strong> 이 계층화된 접근 방식은 보안에 대한 <a href=https://en.wikipedia.org/wiki/Defense_in_depth_(computing)>심층 방어</a>
컴퓨팅 접근 방식을 강화하며, 소프트웨어 시스템의 보안을 위한 모범 사례로
널리 알려져 있다.
</div>
<figure class=diagram-large>
<img src=/images/docs/4c.png> <figcaption>
<h4>클라우드 네이티브 보안의 4C</h4>
</figcaption>
</figure>
<p>클라우드 네이티브 보안 모델의 각 계층은 다음의 가장 바깥쪽 계층을 기반으로 한다.
코드 계층은 강력한 기본(클라우드, 클러스터, 컨테이너) 보안 계층의 이점을 제공한다.
코드 수준에서 보안을 처리하여 기본 계층의 열악한 보안 표준을
보호할 수 없다.</p>
<h2 id=클라우드>클라우드</h2>
<p>여러 면에서 클라우드(또는 공동 위치 서버, 또는 기업의 데이터 센터)는 쿠버네티스 클러스터 구성을 위한
<a href=https://en.wikipedia.org/wiki/Trusted_computing_base>신뢰 컴퓨팅 기반(trusted computing base)</a>
이다. 클라우드 계층이 취약하거나 취약한 방식으로
구성된 경우 이 기반 위에서 구축된 구성 요소가 안전하다는
보장은 없다. 각 클라우드 공급자는 해당 환경에서 워크로드를 안전하게 실행하기
위한 보안 권장 사항을 제시한다.</p>
<h3 id=클라우드-공급자-보안>클라우드 공급자 보안</h3>
<p>자신의 하드웨어 또는 다른 클라우드 공급자에서 쿠버네티스 클러스터를 실행 중인 경우,
보안 모범 사례는 설명서를 참고한다.
다음은 인기있는 클라우드 공급자의 보안 문서 중 일부에 대한 링크이다.</p>
<table><caption style=display:none>클라우드 공급자 보안</caption>
<thead>
<tr>
<th>IaaS 공급자</th>
<th>링크</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alibaba Cloud</td>
<td><a href=https://www.alibabacloud.com/trust-center>https://www.alibabacloud.com/trust-center</a></td>
</tr>
<tr>
<td>Amazon Web Services</td>
<td><a href=https://aws.amazon.com/security/>https://aws.amazon.com/security/</a></td>
</tr>
<tr>
<td>Google Cloud Platform</td>
<td><a href=https://cloud.google.com/security/>https://cloud.google.com/security/</a></td>
</tr>
<tr>
<td>IBM Cloud</td>
<td><a href=https://www.ibm.com/cloud/security>https://www.ibm.com/cloud/security</a></td>
</tr>
<tr>
<td>Microsoft Azure</td>
<td><a href=https://docs.microsoft.com/en-us/azure/security/azure-security>https://docs.microsoft.com/en-us/azure/security/azure-security</a></td>
</tr>
<tr>
<td>Oracle Cloud Infrastructure</td>
<td><a href=https://www.oracle.com/security/>https://www.oracle.com/security/</a></td>
</tr>
<tr>
<td>VMWare VSphere</td>
<td><a href=https://www.vmware.com/security/hardening-guides.html>https://www.vmware.com/security/hardening-guides.html</a></td>
</tr>
</tbody>
</table>
<h3 id=infrastructure-security>인프라스트럭처 보안</h3>
<p>쿠버네티스 클러스터에서 인프라 보안을 위한 제안은 다음과 같다.</p>
<table><caption style=display:none>인프라스트럭처 보안</caption>
<thead>
<tr>
<th>쿠버네티스 인프라에서 고려할 영역</th>
<th>추천</th>
</tr>
</thead>
<tbody>
<tr>
<td>API 서버에 대한 네트워크 접근(컨트롤 플레인)</td>
<td>쿠버네티스 컨트롤 플레인에 대한 모든 접근은 인터넷에서 공개적으로 허용되지 않으며 클러스터 관리에 필요한 IP 주소 집합으로 제한된 네트워크 접근 제어 목록에 의해 제어된다.</td>
</tr>
<tr>
<td>노드에 대한 네트워크 접근(노드)</td>
<td>지정된 포트의 컨트롤 플레인에서 <em>만</em> (네트워크 접근 제어 목록을 통한) 연결을 허용하고 NodePort와 LoadBalancer 유형의 쿠버네티스 서비스에 대한 연결을 허용하도록 노드를 구성해야 한다. 가능하면 이러한 노드가 공용 인터넷에 완전히 노출되어서는 안된다.</td>
</tr>
<tr>
<td>클라우드 공급자 API에 대한 쿠버네티스 접근</td>
<td>각 클라우드 공급자는 쿠버네티스 컨트롤 플레인 및 노드에 서로 다른 권한 집합을 부여해야 한다. 관리해야하는 리소스에 대해 <a href=https://en.wikipedia.org/wiki/Principle_of_least_privilege>최소 권한의 원칙</a>을 따르는 클라우드 공급자의 접근 권한을 클러스터에 구성하는 것이 가장 좋다. <a href=https://github.com/kubernetes/kops/blob/master/docs/iam_roles.md#iam-roles>Kops 설명서</a>는 IAM 정책 및 역할에 대한 정보를 제공한다.</td>
</tr>
<tr>
<td>etcd에 대한 접근</td>
<td>etcd(쿠버네티스의 데이터 저장소)에 대한 접근은 컨트롤 플레인으로만 제한되어야 한다. 구성에 따라 TLS를 통해 etcd를 사용해야 한다. 자세한 내용은 <a href=https://github.com/etcd-io/etcd/tree/master/Documentation>etcd 문서</a>에서 확인할 수 있다.</td>
</tr>
<tr>
<td>etcd 암호화</td>
<td>가능한 한 모든 스토리지를 암호화하는 것이 좋은 방법이며, etcd는 전체 클러스터(시크릿 포함)의 상태를 유지하고 있기에 특히 디스크는 암호화되어 있어야 한다.</td>
</tr>
</tbody>
</table>
<h2 id=클러스터>클러스터</h2>
<p>쿠버네티스 보안에는 다음의 두 가지 영역이 있다.</p>
<ul>
<li>설정 가능한 클러스터 컴포넌트의 보안</li>
<li>클러스터에서 실행되는 애플리케이션의 보안</li>
</ul>
<h3 id=cluster-components>클러스터의 컴포넌트</h3>
<p>우발적이거나 악의적인 접근으로부터 클러스터를 보호하고,
모범 사례에 대한 정보를 채택하기 위해서는
<a href=/docs/tasks/administer-cluster/securing-a-cluster/>클러스터 보안</a>에 대한 조언을 읽고 따른다.</p>
<h3 id=cluster-applications>클러스터 내 컴포넌트(애플리케이션)</h3>
<p>애플리케이션의 공격 영역에 따라, 보안의 특정 측면에
중점을 둘 수 있다. 예를 들어, 다른 리소스 체인에 중요한 서비스(서비스 A)와
리소스 소진 공격에 취약한 별도의 작업 부하(서비스 B)를 실행하는 경우,
서비스 B의 리소스를 제한하지 않으면
서비스 A가 손상될 위험이 높다. 다음은 쿠버네티스에서
실행되는 워크로드를 보호하기 위한 보안 문제 및 권장 사항이 나와 있는 표이다.</p>
<table>
<thead>
<tr>
<th>워크로드 보안에서 고려할 영역</th>
<th>추천</th>
</tr>
</thead>
<tbody>
<tr>
<td>RBAC 인증(쿠버네티스 API에 대한 접근)</td>
<td><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/>https://kubernetes.io/docs/reference/access-authn-authz/rbac/</a></td>
</tr>
<tr>
<td>인증</td>
<td><a href=https://kubernetes.io/ko/docs/concepts/security/controlling-access/>https://kubernetes.io/ko/docs/concepts/security/controlling-access/</a></td>
</tr>
<tr>
<td>애플리케이션 시크릿 관리(및 유휴 상태에서의 etcd 암호화 등)</td>
<td><a href=https://kubernetes.io/ko/docs/concepts/configuration/secret/>https://kubernetes.io/ko/docs/concepts/configuration/secret/</a> <br> <a href=https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/>https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/</a></td>
</tr>
<tr>
<td>파드가 파드 시큐리티 폴리시를 만족하는지 확인하기</td>
<td><a href=https://kubernetes.io/docs/concepts/security/pod-security-standards/#policy-instantiation>https://kubernetes.io/docs/concepts/security/pod-security-standards/#policy-instantiation</a></td>
</tr>
<tr>
<td>서비스 품질(및 클러스터 리소스 관리)</td>
<td><a href=https://kubernetes.io/ko/docs/tasks/configure-pod-container/quality-service-pod/>https://kubernetes.io/ko/docs/tasks/configure-pod-container/quality-service-pod/</a></td>
</tr>
<tr>
<td>네트워크 정책</td>
<td><a href=https://kubernetes.io/ko/docs/concepts/services-networking/network-policies/>https://kubernetes.io/ko/docs/concepts/services-networking/network-policies/</a></td>
</tr>
<tr>
<td>쿠버네티스 인그레스를 위한 TLS</td>
<td><a href=https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#tls>https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#tls</a></td>
</tr>
</tbody>
</table>
<h2 id=컨테이너>컨테이너</h2>
<p>컨테이너 보안은 이 가이드의 범위를 벗어난다. 다음은 일반적인 권장사항과
이 주제에 대한 링크이다.</p>
<table>
<thead>
<tr>
<th>컨테이너에서 고려할 영역</th>
<th>추천</th>
</tr>
</thead>
<tbody>
<tr>
<td>컨테이너 취약점 스캔 및 OS에 종속적인 보안</td>
<td>이미지 빌드 단계의 일부로 컨테이너에 알려진 취약점이 있는지 검사해야 한다.</td>
</tr>
<tr>
<td>이미지 서명 및 시행</td>
<td>컨테이너 이미지에 서명하여 컨테이너의 내용에 대한 신뢰 시스템을 유지한다.</td>
</tr>
<tr>
<td>권한있는 사용자의 비허용</td>
<td>컨테이너를 구성할 때 컨테이너의 목적을 수행하는데 필요한 최소 권한을 가진 사용자를 컨테이너 내에 만드는 방법에 대해서는 설명서를 참조한다.</td>
</tr>
<tr>
<td>더 강력한 격리로 컨테이너 런타임 사용</td>
<td>더 강력한 격리를 제공하는 <a href=/ko/docs/concepts/containers/runtime-class/>컨테이너 런타임 클래스</a>를 선택한다.</td>
</tr>
</tbody>
</table>
<h2 id=코드>코드</h2>
<p>애플리케이션 코드는 가장 많은 제어를 할 수 있는 주요 공격 영역 중 하나이다.
애플리케이션 코드 보안은 쿠버네티스 보안 주제를 벗어나지만,
애플리케이션 코드를 보호하기 위한 권장 사항은 다음과 같다.</p>
<h3 id=코드-보안>코드 보안</h3>
<table><caption style=display:none>코드 보안</caption>
<thead>
<tr>
<th>코드에서 고려할 영역</th>
<th>추천</th>
</tr>
</thead>
<tbody>
<tr>
<td>TLS를 통한 접근</td>
<td>코드가 TCP를 통해 통신해야 한다면, 미리 클라이언트와 TLS 핸드 셰이크를 수행한다. 몇 가지 경우를 제외하고, 전송 중인 모든 것을 암호화한다. 한 걸음 더 나아가, 서비스 간 네트워크 트래픽을 암호화하는 것이 좋다. 이것은 인증서를 가지고 있는 두 서비스의 양방향 검증을 실행하는 <a href=https://en.wikipedia.org/wiki/Mutual_authentication>mTLS(상호 TLS 인증)</a>를 통해 수행할 수 있다.</td>
</tr>
<tr>
<td>통신 포트 범위 제한</td>
<td>이 권장사항은 당연할 수도 있지만, 가능하면 통신이나 메트릭 수집에 꼭 필요한 서비스의 포트만 노출시켜야 한다.</td>
</tr>
<tr>
<td>타사 종속성 보안</td>
<td>애플리케이션의 타사 라이브러리를 정기적으로 스캔하여 현재 알려진 취약점이 없는지 확인하는 것이 좋다. 각 언어에는 이런 검사를 자동으로 수행하는 도구를 가지고 있다.</td>
</tr>
<tr>
<td>정적 코드 분석</td>
<td>대부분 언어에는 잠재적으로 안전하지 않은 코딩 방법에 대해 코드 스니펫을 분석할 수 있는 방법을 제공한다. 가능한 언제든지 일반적인 보안 오류에 대해 코드베이스를 스캔할 수 있는 자동화된 도구를 사용하여 검사를 한다. 도구는 다음에서 찾을 수 있다. <a href=https://owasp.org/www-community/Source_Code_Analysis_Tools>https://owasp.org/www-community/Source_Code_Analysis_Tools</a></td>
</tr>
<tr>
<td>동적 탐지 공격</td>
<td>잘 알려진 공격 중 일부를 서비스에 테스트할 수 있는 자동화된 몇 가지 도구가 있다. 여기에는 SQL 인젝션, CSRF 및 XSS가 포함된다. 가장 널리 사용되는 동적 분석 도구는 <a href=https://owasp.org/www-project-zap/>OWASP Zed Attack 프록시</a>이다.</td>
</tr>
</tbody>
</table>
<h2 id=다음-내용>다음 내용</h2>
<p>쿠버네티스 보안 주제에 관련한 내용들을 배워보자.</p>
<ul>
<li><a href=/docs/concepts/security/pod-security-standards/>파드 보안 표준</a></li>
<li><a href=/ko/docs/concepts/services-networking/network-policies/>파드에 대한 네트워크 정책</a></li>
<li><a href=/ko/docs/concepts/security/controlling-access>쿠버네티스 API 접근 제어하기</a></li>
<li><a href=/docs/tasks/administer-cluster/securing-a-cluster/>클러스터 보안</a></li>
<li>컨트롤 플레인을 위한 <a href=/ko/docs/tasks/tls/managing-tls-in-a-cluster/>전송 데이터 암호화</a></li>
<li><a href=/docs/tasks/administer-cluster/encrypt-data/>Rest에서 데이터 암호화</a></li>
<li><a href=/ko/docs/concepts/configuration/secret/>쿠버네티스 시크릿</a></li>
<li><a href=/ko/docs/concepts/containers/runtime-class>런타임 클래스</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4d77d1ae4c06aa14f54b385191627881>2 - 쿠버네티스 API 접근 제어하기</h1>
<p>이 페이지는 쿠버네티스 API에 대한 접근 제어의 개요를 제공한다.</p>
<p>사용자는 <code>kubectl</code>, 클라이언트 라이브러리
또는 REST 요청을 통해
<a href=/ko/docs/tasks/access-application-cluster/access-cluster/>API에 접근한다</a>.
사용자와 쿠버네티스 서비스 어카운트 모두 API에 접근할 수 있다.
요청이 API에 도달하면,
다음 다이어그램에 설명된 몇 가지 단계를 거친다.</p>
<p><img src=/images/docs/admin/access-control-overview.svg alt="Diagram of request handling steps for Kubernetes API request"></p>
<h2 id=전송-보안>전송 보안</h2>
<p>일반적인 쿠버네티스 클러스터에서 API는 443번 포트에서 서비스한다.
API 서버는 인증서를 제시한다.
이 인증서는 종종 자체 서명되기 때문에 일반적으로 사용자 머신의 <code>$USER/.kube/config</code>는
API 서버의 인증서에 대한 루트 인증서를 포함하며,
시스템 기본 루트 인증서 대신 사용된다.
<code>kube-up.sh</code>을 사용하여 클러스터를 직접 생성할 때
이 인증서는 일반적으로 <code>$USER/.kube/config</code>에 자동으로 기록된다.
클러스터에 여러 명의 사용자가 있는 경우, 작성자는 인증서를 다른 사용자와 공유해야 한다.</p>
<h2 id=인증>인증</h2>
<p>TLS가 설정되면 HTTP 요청이 인증 단계로 넘어간다.
이는 다이어그램에 <strong>1</strong>단계로 표시되어 있다.
클러스터 생성 스크립트 또는 클러스터 관리자는
API 서버가 하나 이상의 인증기 모듈을 실행하도록 구성한다.
인증기는 <a href=/docs/reference/access-authn-authz/authentication/>여기</a>에서 더 자세히 서술한다.</p>
<p>인증 단계로 들어가는 것은 온전한 HTTP 요청이지만
일반적으로 헤더 그리고/또는 클라이언트 인증서를 검사한다.</p>
<p>인증 모듈은 클라이언트 인증서, 암호 및 일반 토큰, 부트스트랩 토큰,
JWT 토큰(서비스 어카운트에 사용됨)을 포함한다.</p>
<p>여러 개의 인증 모듈을 지정할 수 있으며,
이 경우 하나의 인증 모듈이 성공할 때까지 각 모듈을 순차적으로 시도한다.</p>
<p>GCE에서는 클라이언트 인증서, 암호, 일반 토큰 및 JWT 토큰이 모두 사용 가능하다.</p>
<p>요청을 인증할 수 없는 경우 HTTP 상태 코드 401과 함께 거부된다.
이 외에는 사용자가 특정 <code>username</code>으로 인증되며,
이 username은 다음 단계에서 사용자의 결정에 사용할 수 있다.
일부 인증기는 사용자 그룹 관리 기능을 제공하는 반면,
이외의 인증기는 그렇지 않다.</p>
<p>쿠버네티스는 접근 제어 결정과 요청 기록 시 <code>usernames</code>를 사용하지만,
<code>user</code> 오브젝트를 가지고 있지 않고 usernames 나 기타 사용자 정보를
오브젝트 저장소에 저장하지도 않는다.</p>
<h2 id=인가>인가</h2>
<p>특정 사용자로부터 온 요청이 인증된 후에는 인가되어야 한다. 이는 다이어그램에 <strong>2</strong>단계로 표시되어 있다.</p>
<p>요청은 요청자의 username, 요청된 작업 및 해당 작업이 영향을 주는 오브젝트를 포함해야 한다. 기존 정책이 요청된 작업을 완료할 수 있는 권한이 해당 사용자에게 있다고 선언하는 경우 요청이 인가된다.</p>
<p>예를 들어 Bob이 아래와 같은 정책을 가지고 있다면 <code>projectCaribou</code> 네임스페이스에서만 파드를 읽을 수 있다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;abac.authorization.kubernetes.io/v1beta1&#34;</span>,
    <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;Policy&#34;</span>,
    <span style=color:green;font-weight:700>&#34;spec&#34;</span>: {
        <span style=color:green;font-weight:700>&#34;user&#34;</span>: <span style=color:#b44>&#34;bob&#34;</span>,
        <span style=color:green;font-weight:700>&#34;namespace&#34;</span>: <span style=color:#b44>&#34;projectCaribou&#34;</span>,
        <span style=color:green;font-weight:700>&#34;resource&#34;</span>: <span style=color:#b44>&#34;pods&#34;</span>,
        <span style=color:green;font-weight:700>&#34;readonly&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>
    }
}
</code></pre></div><p>Bob이 다음과 같은 요청을 하면 'projectCaribou' 네임스페이스의 오브젝트를 읽을 수 있기 때문에 요청이 인가된다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;authorization.k8s.io/v1beta1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;SubjectAccessReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;spec&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;resourceAttributes&#34;</span>: {
      <span style=color:green;font-weight:700>&#34;namespace&#34;</span>: <span style=color:#b44>&#34;projectCaribou&#34;</span>,
      <span style=color:green;font-weight:700>&#34;verb&#34;</span>: <span style=color:#b44>&#34;get&#34;</span>,
      <span style=color:green;font-weight:700>&#34;group&#34;</span>: <span style=color:#b44>&#34;unicorn.example.org&#34;</span>,
      <span style=color:green;font-weight:700>&#34;resource&#34;</span>: <span style=color:#b44>&#34;pods&#34;</span>
    }
  }
}
</code></pre></div><p>Bob이 <code>projectCaribou</code> 네임스페이스에 있는 오브젝트에 쓰기(<code>create</code> 또는 <code>update</code>) 요청을 하면 그의 인가는 거부된다. 만약 Bob이 <code>projectFish</code>처럼 다른 네임스페이스의 오브젝트 읽기(<code>get</code>) 요청을 하면 그의 인가는 거부된다.</p>
<p>쿠버네티스 인가는 공통 REST 속성을 사용하여 기존 조직 전체 또는 클라우드 제공자 전체의 접근 제어 시스템과 상호 작용할 것을 요구한다. 이러한 제어 시스템은 쿠버네티스 API 이외의 다른 API와 상호작용할 수 있으므로 REST 형식을 사용하는 것이 중요하다.</p>
<p>쿠버네티스는 ABAC 모드, RBAC 모드, 웹훅 모드와 같은 여러 개의 인가 모듈을 지원한다. 관리자가 클러스터를 생성할 때 API 서버에서 사용해야 하는 인가 모듈을 구성했다. 인가 모듈이 2개 이상 구성되면 쿠버네티스가 각 모듈을 확인하고, 어느 모듈이 요청을 승인하면 요청을 진행할 수 있다. 모든 모듈이 요청을 거부하면 요청이 거부된다(HTTP 상태 코드 403).</p>
<p>인가 모듈을 사용한 정책 생성을 포함해 쿠버네티스 인가에 대해 더 배우려면 <a href=/ko/docs/reference/access-authn-authz/authorization/>인가 개요</a>를 참조한다.</p>
<h2 id=어드미션-제어>어드미션 제어</h2>
<p>어드미션 제어 모듈은 요청을 수정하거나 거부할 수 있는 소프트웨어 모듈이다.
인가 모듈에서 사용할 수 있는 속성 외에도
어드미션 제어 모듈은 생성되거나 수정된 오브젝트 내용에 접근할 수 있다.</p>
<p>어드미션 컨트롤러는 오브젝트를 생성, 수정, 삭제 또는 (프록시에) 연결하는 요청에 따라 작동한다.
어드미션 컨트롤러는 단순히 오브젝트를 읽는 요청에는 작동하지 않는다.
여러 개의 어드미션 컨트롤러가 구성되면 순서대로 호출된다.</p>
<p>이는 다이어그램에 <strong>3</strong>단계로 표시되어 있다.</p>
<p>인증 및 인가 모듈과 달리,
어드미션 제어 모듈이 거부되면 요청은 즉시 거부된다.</p>
<p>어드미션 제어 모듈은 오브젝트를 거부하는 것 외에도
필드의 복잡한 기본값을 설정할 수 있다.</p>
<p>사용 가능한 어드미션 제어 모듈은 <a href=/docs/reference/access-authn-authz/admission-controllers/>여기</a>에 서술되어 있다.</p>
<p>요청이 모든 어드미션 제어 모듈을 통과하면 유효성 검사 루틴을 사용하여 해당 API 오브젝트를 검증한 후
오브젝트 저장소에 기록(<strong>4</strong>단계)된다.</p>
<h2 id=api-서버-포트와-ip>API 서버 포트와 IP</h2>
<p>이전의 논의는 (일반적인 경우) API 서버의 보안 포트로 전송되는 요청에 적용된다.
API 서버는 실제로 다음과 같이 2개의 포트에서 서비스할 수 있다.</p>
<p>기본적으로, 쿠버네티스 API 서버는 2개의 포트에서 HTTP 서비스를 한다.</p>
<ol>
<li>
<p><code>로컬호스트 포트</code>:</p>
<ul>
<li>테스트 및 부트스트랩을 하기 위한 것이며 마스터 노드의 다른 구성요소
(스케줄러, 컨트롤러 매니저)가 API와 통신하기 위한 것이다.</li>
<li>TLS가 없다.</li>
<li>기본 포트는 8080이다.</li>
<li>기본 IP는 로컬호스트(localhost)이며, <code>--insecure-bind-address</code> 플래그를 사용하여 변경한다.</li>
<li>요청이 인증 및 인가 모듈을 <strong>우회한다</strong>.</li>
<li>요청이 어드미션 제어 모듈(들)에 의해 처리된다.</li>
<li>호스트 접근 요구로부터 보호를 받는다.</li>
</ul>
</li>
<li>
<p><code>보안 포트</code>:</p>
<ul>
<li>가능한 항상 사용하는 것이 좋다.</li>
<li>TLS를 사용한다. <code>--tls-cert-file</code> 플래그로 인증서를 지정하고 <code>--tls-private-key-file</code> 플래그로 키를 지정한다.</li>
<li>기본 포트는 6443이며, <code>--secure-port</code> 플래그를 사용하여 변경한다.</li>
<li>기본 IP는 로컬호스트가 아닌 첫 번째 네트워크 인터페이스이며, <code>--bind-address</code> 플래그를 사용하여 변경한다.</li>
<li>요청이 인증 및 인가 모듈에 의해 처리된다.</li>
<li>요청이 어드미션 제어 모듈(들)에 의해 처리된다.</li>
<li>인증 및 인가 모듈을 실행한다.</li>
</ul>
</li>
</ol>
<p>GCE(구글 컴퓨트 엔진) 및 다른 클라우드 제공자에서 <code>kube-up.sh</code>로 클러스터를 생성하면
API 서버는 포트 443에서 서비스한다.
GCE에서는 외부 HTTPS가 API에 접근할 수 있도록 프로젝트에서 방화벽 규칙이 구성된다.
이외에 클러스터 설정 방법은 다양하다.</p>
</div>
</main>
</div>
</div>
<footer class=d-print-none>
<div class=footer__links>
<nav>
<a class=text-white href=/ko/docs/home/>홈</a>
<a class=text-white href=/ko/blog/>블로그</a>
<a class=text-white href=/ko/training/>교육</a>
<a class=text-white href=/ko/partners/>파트너</a>
<a class=text-white href=/ko/community/>커뮤니티</a>
<a class=text-white href=/ko/case-studies/>사례 연구</a>
</nav>
</div>
<div class=container-fluid>
<div class=row>
<div class="col-6 col-sm-2 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list">
<a class=text-white target=_blank href=https://discuss.kubernetes.io>
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank href=https://twitter.com/kubernetesio>
<i class="fab fa-twitter"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar>
<a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io">
<i class="fas fa-calendar-alt"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube>
<a class=text-white target=_blank href=https://youtube.com/kubernetescommunity>
<i class="fab fa-youtube"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank href=https://slack.k8s.io>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute>
<a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide>
<i class="fas fa-edit"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow">
<a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes>
<i class="fab fa-stack-overflow"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-8 text-center order-sm-2">
<small class=text-white>&copy; 2023 The Kubernetes Authors | Documentation Distributed under <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a></small>
<br>
<small class=text-white>Copyright &copy; 2023 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/trademark-usage class=light-text>Trademark Usage page</a></small>
<br>
<small class=text-white>ICP license: 京ICP备17074266号-3</small>
</div>
</div>
</div>
</footer>
</div>
<script src=/js/popper-1.14.3.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap-4.3.1.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script>
<script src=/js/main.min.40616251a9b6e4b689e7769be0340661efa4d7ebb73f957404e963e135b4ed52.js integrity="sha256-QGFiUam25LaJ53ab4DQGYe+k1+u3P5V0BOlj4TW07VI=" crossorigin=anonymous></script>
</body>
</html>